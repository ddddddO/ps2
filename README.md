# 🎮 ps2

[![GitHub release](https://img.shields.io/github/release/ddddddO/ps2.svg?label=Release&color=darkcyan)](https://github.com/ddddddO/ps2/releases)
[![codecov](https://codecov.io/gh/ddddddO/ps2/graph/badge.svg?token=6E0G81K2H0)](https://codecov.io/gh/ddddddO/ps2)
[![ci](https://github.com/ddddddO/ps2/actions/workflows/ci.yaml/badge.svg)](https://github.com/ddddddO/ps2/actions/workflows/ci.yaml)


phP Serialize() To xxxx (e.g. JSON)

Web 👉 https://ddddddo.github.io/ps2/

Converts data serialized by the PHP serialize function into some format (only JSON for now).</br>
This may be useful if you want to convert the payload string stored in the Laravel job queue 👍 </br>
If you find any bugs, please create an issue or PR! 

- Generated by Gemini 2.5 Flash.
    ```
    phpのserialize関数でシリアライズされた文字列（元のデータは、ネストした連想配列と、配列と、適当なクラスのオブジェクトを持つ）から、astを生成するgoプログラムを教えてください。
    ```

    - 一発で動かない & 微調整の必要があったため手を入れた箇所あり
    - 生成されたコードは「Go言語でつくるインタプリタ」の内容にかなり似ている

- PHP serialize()
    - https://www.php.net/manual/ja/function.serialize.php

- It worked in the following environment: PHP 7.4.33 (cli) (built: May  9 2025 06:44:16) ( NTS )

## Install

### Homebrew

```console
$ brew install ddddddO/tap/ps2
```

### Go
```console
$ go install github.com/ddddddO/ps2@latest
```

## Usage

- ※ `echo 'O:13:"App\UpdateJob....' | ps2` みたいに echo でやると、`\U`が削られる可能性があるため、`<<<` か `printf` 推奨

Format:
```console
$ ps2 <<< '< Data serialized by PHP serialize function >'
```

Example:

```console
$ ps2 <<< 'a:9:{s:10:"string_val";s:27:"こんにちは、世界！";s:7:"int_val";i:123;s:9:"bool_true";b:1;s:10:"bool_false";b:0;s:8:"null_val";N;s:9:"float_val";d:3.14159;s:18:"nested_assoc_array";a:3:{s:4:"name";s:12:"Go Developer";s:7:"details";a:2:{s:3:"age";i:30;s:4:"city";s:8:"Kawasaki";}s:7:"hobbies";a:3:{i:0;s:6:"coding";i:1;s:7:"reading";i:2;s:6:"hiking";}}s:13:"indexed_array";a:5:{i:0;s:9:"りんご";i:1;s:9:"バナナ";i:2;s:12:"チェリー";i:3;i:100;i:4;b:1;}s:15:"object_instance";O:8:"MyObject":3:{s:10:"publicProp";s:15:"パブリック";s:16:"*protectedProp";i:456;s:19:"MyObjectprivateProp";a:1:{s:3:"key";s:5:"value";}}}'
{
  "bool_false": false,
  "bool_true": true,
  "float_val": 3.14159,
  "indexed_array": [
    "りんご",
    "バナナ",
    "チェリー",
    100,
    true
  ],
  "int_val": 123,
  "nested_assoc_array": {
    "details": {
      "age": 30,
      "city": "Kawasaki"
    },
    "hobbies": [
      "coding",
      "reading",
      "hiking"
    ],
    "name": "Go Developer"
  },
  "null_val": null,
  "object_instance": {
    "*protectedProp": 456,
    "MyObjectprivateProp": {
      "key": "value"
    },
    "__class_name": "MyObject",
    "publicProp": "パブリック"
  },
  "string_val": "こんにちは、世界！"
}
$
```
